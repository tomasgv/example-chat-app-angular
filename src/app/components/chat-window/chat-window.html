<div class="h-screen flex flex-col bg-gray-100">
  <!-- Header -->
  <header class="bg-white shadow-md px-6 py-4 flex justify-between items-center">
    <div class="flex items-center">
      <h1 class="text-2xl font-bold text-gray-800">ChatApp</h1>
      @if (currentRoom(); as room) {
        <span class="ml-4 text-gray-600">
          # {{ room.name }}
        </span>
      }
    </div>
    <div class="flex items-center space-x-4">
      <span class="text-gray-700">ðŸ‘¤ {{ currentUser()?.username }}</span>
      <button
        (click)="logout()"
        class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition"
      >
        Logout
      </button>
    </div>
  </header>

  <!-- Main Content -->
  <div class="flex flex-1 overflow-hidden">
    <!-- Sidebar -->
    <aside class="w-64 bg-gray-800 overflow-y-auto">
      <app-chat-room-list></app-chat-room-list>
    </aside>

    <!-- Chat Area -->
    <main class="flex-1 flex flex-col bg-white">
      <!-- Messages -->
      <div id="messages-container" class="flex-1 overflow-y-auto p-6 space-y-4">
        @if (messages().length === 0) {
          <div class="text-center text-gray-500 mt-10">
            <svg class="w-16 h-16 mx-auto mb-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
            </svg>
            <p class="text-lg">No messages yet. Start the conversation!</p>
          </div>
        }
        @for (message of messages(); track trackById($index, message)) {
          <app-message [message]="message"></app-message>
        }
      </div>

      <!-- Input Area -->
      <div class="border-t bg-gray-50 p-4">
        <form (ngSubmit)="sendMessage()" class="flex space-x-4">
          <input
            type="text"
            [ngModel]="newMessage()"
            (ngModelChange)="newMessage.set($event)"
            name="message"
            placeholder="Type a message..."
            class="flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"
          />
          <button
            type="submit"
            [disabled]="!newMessage().trim()"
            class="px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition"
          >
            Send
          </button>
        </form>
      </div>
    </main>
  </div>
</div>